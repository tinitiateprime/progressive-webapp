{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/developer/Downloads/Archive/frontend/pages/components/SignInButton.tsx"],"sourcesContent":["\"use client\";\r\nimport { signIn, signOut, useSession } from \"next-auth/react\";\r\n\r\nexport default function SignInButton() {\r\n  const { data: session } = useSession();\r\n\r\n  if (session) {\r\n    return (\r\n      <button\r\n        onClick={() =>\r\n          signOut({\r\n            callbackUrl: \"/\",\r\n          })\r\n        }\r\n        style={{\r\n          padding: \"10px 20px\",\r\n          fontSize: \"16px\",\r\n          borderRadius: \"20px\",\r\n          border: \"none\",\r\n          backgroundColor: \"#db4437\",\r\n          color: \"#fff\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Sign Out\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={() => signIn(\"google\")}\r\n      style={{\r\n        padding: \"10px 20px\",\r\n        fontSize: \"16px\",\r\n        borderRadius: \"20px\",\r\n        border: \"none\",\r\n        backgroundColor: \"#4285f4\",\r\n        color: \"#fff\",\r\n        cursor: \"pointer\",\r\n      }}\r\n    >\r\n      Sign in with Google\r\n    </button>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,oMAAU;IAEpC,IAAI,SAAS;QACX,qBACE,qKAAC;YACC,SAAS,IACP,IAAA,iMAAO,EAAC;oBACN,aAAa;gBACf;YAEF,OAAO;gBACL,SAAS;gBACT,UAAU;gBACV,cAAc;gBACd,QAAQ;gBACR,iBAAiB;gBACjB,OAAO;gBACP,QAAQ;YACV;sBACD;;;;;;IAIL;IAEA,qBACE,qKAAC;QACC,SAAS,IAAM,IAAA,gMAAM,EAAC;QACtB,OAAO;YACL,SAAS;YACT,UAAU;YACV,cAAc;YACd,QAAQ;YACR,iBAAiB;YACjB,OAAO;YACP,QAAQ;QACV;kBACD;;;;;;AAIL"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/developer/Downloads/Archive/frontend/pages/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport SignInButton from \"./components/SignInButton\";\r\n\r\nexport default function Home() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n\r\n  const didCallBackend = useRef(false);\r\n  const [redirecting, setRedirecting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (status !== \"authenticated\") return;\r\n    const email = session?.user?.email;\r\n    if (!email) return;\r\n\r\n    // Prevent double-call in React Strict Mode (dev) / re-renders\r\n    if (didCallBackend.current) return;\r\n    didCallBackend.current = true;\r\n\r\n    setRedirecting(true);\r\n\r\n    const location = getLocation();\r\n    \r\n    const backendUrl =\r\n      process.env.NEXT_PUBLIC_BACKEND_URL ?? \"http://localhost:5050\";\r\n\r\n    (async () => {\r\n      try {\r\n        await fetch(`${backendUrl}/api/auth/post-login`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            name: session.user?.name ?? \"\",\r\n            email: email,\r\n            gps: location,\r\n          }),\r\n        });\r\n      } catch (e) {\r\n        console.error(\"post-login failed:\", e);\r\n      } finally {\r\n        router.push(\"/dashboard\");\r\n      }\r\n    })();\r\n  }, [status, session, router]);\r\n\r\n  \r\nfunction getLocation() {\r\n  if (navigator.geolocation) {\r\n    // Request the location\r\n    navigator.geolocation.getCurrentPosition(showPosition, showError, {\r\n        enableHighAccuracy: true,\r\n        timeout: 5000,\r\n        maximumAge: 0\r\n    });\r\n  } else {\r\n    // Browser doesn't support geolocation\r\n    console.log(\"Geolocation is not supported by this browser.\");\r\n  }\r\n}\r\n\r\n// Success function\r\nfunction showPosition(position) {\r\n  const latitude = position.coords.latitude;\r\n  const longitude = position.coords.longitude;\r\n  console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);\r\n  // You can now send these coordinates to your server or use them directly in the web app\r\n}\r\n\r\n// Error function\r\nfunction showError(error) {\r\n  switch(error.code) {\r\n    case error.PERMISSION_DENIED:\r\n      console.log(\"User denied the request for Geolocation.\");\r\n      break;\r\n    case error.POSITION_UNAVAILABLE:\r\n      console.log(\"Location information is unavailable.\");\r\n      break;\r\n    case error.TIMEOUT:\r\n      console.log(\"The request to get user location timed out.\");\r\n      break;\r\n    case error.UNKNOWN_ERROR:\r\n      console.log(\"An unknown error occurred.\");\r\n      break;\r\n  }\r\n}\r\n\r\n\r\n  if (redirecting) return <p>Redirecting...</p>;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        fontFamily: \"Arial, sans-serif\",\r\n        backgroundColor: \"#f5f5f5\",\r\n      }}\r\n    >\r\n      <header\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          padding: \"20px 40px\",\r\n          backgroundColor: \"#fff\",\r\n          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\r\n        }}\r\n      >\r\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <img\r\n            src=\"/favicon_new.png\"\r\n            alt=\"Tinitiate Logo\"\r\n            style={{ height: 40, marginRight: 10 }}\r\n          />\r\n          <span style={{ fontSize: 20, fontWeight: 500, color: \"#202124\" }}>\r\n            Tinitiate\r\n          </span>\r\n        </div>\r\n\r\n        <SignInButton />\r\n      </header>\r\n\r\n      <main\r\n        style={{\r\n          flex: 1,\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          padding: \"40px\",\r\n          textAlign: \"center\",\r\n        }}\r\n      >\r\n        <div style={{ maxWidth: 500 }}>\r\n          <h1\r\n            style={{\r\n              fontSize: \"36px\",\r\n              color: \"#202124\",\r\n              marginBottom: \"20px\",\r\n              fontWeight: 500,\r\n            }}\r\n          >\r\n            Welcome to Tinitiate\r\n          </h1>\r\n          <p style={{ fontSize: \"16px\", color: \"#5f6368\", marginBottom: 30 }}>\r\n            Sign in with Google to continue and access tutorials\r\n          </p>\r\n          <SignInButton />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}